// Generated by CoffeeScript 1.4.0
(function(){var e,t,n,r,i;n=this;n.markid=localStorage.marknoticeid;n.url="http://v2ex.com/";n.noticeUrl="http://v2ex.com/notifications";n.apiUrl="http://v2ex.com/faq";t=function(e){var t,r,i;t=0;e&&(t=parseInt(e[1]));if(t>0){r="V2EX ("+t+")";i=n.noticeUrl;return chrome.bookmarks.update(n.markid,{title:r,url:i})}r="V2EX";i=n.url;return chrome.bookmarks.update(n.markid,{title:r,url:i})};r=function(){var e;e=new XMLHttpRequest;e.open("GET",n.apiUrl,!0);e.onreadystatechange=function(){if(e.readyState===4)return t(e.responseText.match(/FAQ\s\((.*)\)<\/title>/))};return e.send()};e=function(){var e;e={title:"V2EX",url:n.url};chrome.bookmarks.create(e,function(e){localStorage.marknoticeid=n.markid=e.id;return r()});return chrome.tabs.create({url:chrome.extension.getURL("/assets/intro.html")})};i=function(){n.markid?chrome.bookmarks.get(n.markid,function(t){if(!t){localStorage.removeItem(n.markid);return e()}}):e();return setInterval(r,9e4)};addEventListener("load",i,!1)}).call(this);